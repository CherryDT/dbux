"use strict";(self.webpackChunkdbux_docs=self.webpackChunkdbux_docs||[]).push([[246],{3905:function(e,n,t){t.d(n,{Zo:function(){return d},kt:function(){return m}});var i=t(7294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,i,r=function(e,n){if(null==e)return{};var t,i,r={},l=Object.keys(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var u=i.createContext({}),s=function(e){var n=i.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},d=function(e){var n=s(e.components);return i.createElement(u.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},p=i.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,u=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),p=s(t),m=r,b=p["".concat(u,".").concat(m)]||p[m]||c[m]||l;return t?i.createElement(b,a(a({ref:n},d),{},{components:t})):i.createElement(b,a({ref:n},d))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,a=new Array(l);a[0]=p;var o={};for(var u in n)hasOwnProperty.call(n,u)&&(o[u]=n[u]);o.originalType=e,o.mdxType="string"==typeof e?e:r,a[1]=o;for(var s=2;s<l;s++)a[s]=t[s];return i.createElement.apply(null,a)}return i.createElement.apply(null,t)}p.displayName="MDXCreateElement"},5002:function(e,n,t){t.d(n,{Z:function(){return s}});var i=t(7462),r=t(3366),l=t(7294),a=t(3616),o=["toc","className","linkClassName","linkActiveClassName","minHeadingLevel","maxHeadingLevel"];function u(e){var n=e.toc,t=e.className,i=e.linkClassName,r=e.isChild;return n.length?l.createElement("ul",{className:r?void 0:t},n.map((function(e){return l.createElement("li",{key:e.id},l.createElement("a",{href:"#"+e.id,className:null!=i?i:void 0,dangerouslySetInnerHTML:{__html:e.value}}),l.createElement(u,{isChild:!0,toc:e.children,className:t,linkClassName:i}))}))):null}function s(e){var n=e.toc,t=e.className,s=void 0===t?"table-of-contents table-of-contents__left-border":t,d=e.linkClassName,c=void 0===d?"table-of-contents__link":d,p=e.linkActiveClassName,m=void 0===p?void 0:p,b=e.minHeadingLevel,f=e.maxHeadingLevel,h=(0,r.Z)(e,o),g=(0,a.LU)(),k=null!=b?b:g.tableOfContents.minHeadingLevel,v=null!=f?f:g.tableOfContents.maxHeadingLevel,x=(0,a.DA)({toc:n,minHeadingLevel:k,maxHeadingLevel:v}),y=(0,l.useMemo)((function(){if(c&&m)return{linkClassName:c,linkActiveClassName:m,minHeadingLevel:k,maxHeadingLevel:v}}),[c,m,k,v]);return(0,a.Si)(y),l.createElement(u,(0,i.Z)({toc:x,className:s,linkClassName:c},h))}},3755:function(e,n,t){t.d(n,{Z:function(){return u}});var i=t(7462),r=t(3366),l=t(7294),a=t(9700),o=["path","children","title"];function u(e){var n=e.path,t=e.children,u=e.title,s=(0,r.Z)(e,o);if(!n)throw new Error('invalid <CodeLink /> missing "path". - props: '+JSON.stringify(e,null,2));var d=(0,a.B)(n);t=t||d,u=u||t;var c="https://github.com/Domiii/dbux/tree/master/"+n;return l.createElement("a",(0,i.Z)({title:u,href:c},s),t)}},8640:function(e,n,t){t.d(n,{Z:function(){return u}});var i=t(7294),r="tableOfContentsInline_0DDH",l=t(5002);var a=function(e){var n=e.toc,t=e.minHeadingLevel,a=e.maxHeadingLevel;return i.createElement("div",{className:r},i.createElement(l.Z,{toc:n,minHeadingLevel:t,maxHeadingLevel:a,className:"table-of-contents",linkClassName:null}))},o={display:"none"};function u(e){var n=e.toc;return i.createElement("div",{style:o},i.createElement(a,{toc:n}))}},5479:function(e,n,t){t.d(n,{Z:function(){return s}});var i=t(7462),r=t(3366),l=t(7294),a=t(9700),o=t(8767),u=["name","children","title"];function s(e){var n=e.name,t=e.children,s=e.title,d=(0,r.Z)(e,u);if(null==n||!n.includes)throw new Error('Invalid ToolLink does not have a "name" of type string. - props: '+JSON.stringify(e,null,2));if(n.includes("/"))throw new Error('ToolLink\'s "name" must not be a path. - props: '+JSON.stringify(e,null,2));if(!n)throw new Error('invalid <ToolLink /> missing "name". - props: '+JSON.stringify(e,null,2));var c=(0,a.B)(n);t=t||c,s=s||t;var p=(0,o.Z)()+"tools-and-configuration/"+n;return l.createElement("a",(0,i.Z)({title:s,href:p},d),t)}},8767:function(e,n,t){t.d(n,{Z:function(){return r}});var i=t(2263);function r(){return(0,i.Z)().siteConfig.baseUrl}},9700:function(e,n,t){t.d(n,{B:function(){return r}});var i={"dbux-code":"Dbux VSCode Extension"};function r(e){var n=i[e];return n||(e.startsWith("dbux-")&&!e.startsWith("dbux-code")?"@dbux/"+e.substring(5):e)}},4771:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return d},contentTitle:function(){return c},metadata:function(){return p},toc:function(){return m},default:function(){return f}});var i=t(7462),r=t(3366),l=(t(7294),t(3905)),a=t(5479),o=t(3755),u=t(8640),s=["components"],d={},c="Build Pipeline Integration",p={unversionedId:"guides/build-pipeline-integration",id:"guides/build-pipeline-integration",title:"Build Pipeline Integration",description:'As explained in the "Runtime Analysis" chapter you need to "babel your program" with @dbux/babel-plugin enabled).',source:"@site/content/guides/03-build-pipeline-integration.mdx",sourceDirName:"guides",slug:"/guides/build-pipeline-integration",permalink:"/dbux/guides/build-pipeline-integration",editUrl:"https://github.com/Domiii/dbux/blob/master/docs/content/guides/03-build-pipeline-integration.mdx",tags:[],version:"current",sidebarPosition:3,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Performance",permalink:"/dbux/guides/performance"},next:{title:"Tools and Configuration Overview",permalink:"/dbux/tools-and-configuration"}},m=[{value:"Setup",id:"setup",children:[],level:2},{value:"Config",id:"config",children:[],level:2},{value:"Node Applications",id:"node-applications",children:[],level:2},{value:"Webpack",id:"webpack",children:[],level:2},{value:"Rollup",id:"rollup",children:[],level:2},{value:"Storybook",id:"storybook",children:[],level:2},{value:"Create-React-App",id:"create-react-app",children:[],level:2},{value:"Next.js",id:"nextjs",children:[],level:2},{value:"ng",id:"ng",children:[],level:2},{value:"Other Bundlers or Bundler Wrappers",id:"other-bundlers-or-bundler-wrappers",children:[],level:2}],b={toc:m};function f(e){var n=e.components,t=(0,r.Z)(e,s);return(0,l.kt)("wrapper",(0,i.Z)({},b,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"build-pipeline-integration"},"Build Pipeline Integration"),(0,l.kt)(u.Z,{toc:m,mdxType:"TOC"}),(0,l.kt)("p",null,"As explained in ",(0,l.kt)("a",{parentName:"p",href:"/dbux/runtime-analysis/enable-dbux"},'the "Runtime Analysis" chapter'),": for Dbux to work, it first needs to record JavaScript application behavior. To that end, your program must be instrumented with ",(0,l.kt)(o.Z,{path:"dbux-babel-plugin",mdxType:"CodeLink"}),' (i.e.: you need to "',(0,l.kt)("a",{parentName:"p",href:"https://babeljs.io/"},"babel"),' your program" with ',(0,l.kt)("inlineCode",{parentName:"p"},"@dbux/babel-plugin")," enabled)."),(0,l.kt)("p",null,"Once running, the injected ",(0,l.kt)("inlineCode",{parentName:"p"},"@dbux/runtime")," will send collected data to the ",(0,l.kt)("a",{parentName:"p",href:"/dbux/tools-and-configuration/dbux-code#runtime-server"},"runtime server"),"."),(0,l.kt)("h2",{id:"setup"},"Setup"),(0,l.kt)("p",null,"First ",(0,l.kt)("inlineCode",{parentName:"p"},"npm install")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"yarn add")," the necessary ",(0,l.kt)("inlineCode",{parentName:"p"},"@dbux")," packages to the project you want to trace:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"@dbux/babel-plugin")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"@dbux/runtime"))),(0,l.kt)("p",null,"Alternatively, simply install ",(0,l.kt)(a.Z,{name:"dbux-cli",mdxType:"ToolLink"}),". That will also install the other necessary dependencies."),(0,l.kt)("p",null,"Important: Make sure, that they match the version of ",(0,l.kt)(a.Z,{name:"dbux-code",mdxType:"ToolLink"})," that you installed."),(0,l.kt)("h2",{id:"config"},"Config"),(0,l.kt)("p",null,"You can find configuration options for the different tools in the ",(0,l.kt)("a",{parentName:"p",href:"/dbux/tools-and-configuration"},'"Tools and Configuration" chapter'),"."),(0,l.kt)("p",null,"In addition to configuring the individual tools, you want to make sure you ",(0,l.kt)("a",{parentName:"p",href:"/dbux/guides/runtime-trace-filtering"},"configure the module filter to trace the right files"),"."),(0,l.kt)("h2",{id:"node-applications"},"Node Applications"),(0,l.kt)("p",null,"For Node applications that do not need bundling or building, refer to ",(0,l.kt)("a",{parentName:"p",href:"/dbux/tools-and-configuration/dbux-cli"},"the Dbux CLI")," documentation."),(0,l.kt)("h2",{id:"webpack"},"Webpack"),(0,l.kt)("p",null,"Example:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const shouldInclude = require('@dbux/babel-plugin/dist/include').default;\n\n// ...\n\nmodule.exports = {\n  // ...\n  module: {\n    rules: [\n      // ...\n      {\n        test: /\\.jsx?$/,\n        include: [\n          shouldInclude(moduleFilterOptions)\n        ],\n        use: {\n          loader: 'babel-loader',\n          options: {\n            plugins: [\n              // other plugins, running **after** Dbux...\n              '@dbux/babel-plugin'\n              // other plugins, running **before** Dbux...\n            ]\n          }\n        }\n      }\n    ]\n  }\n};\n")),(0,l.kt)("p",null,"NOTE: We use the (configurable/flexible/complicated) ",(0,l.kt)(o.Z,{path:"dbux-projects/assets/sharedAssets/webpack/dbux.webpack.config.base.js",mdxType:"CodeLink"},"dbux.webpack.config.base.js")," for ",(0,l.kt)("a",{parentName:"p",href:"/dbux/dbux-practice/"},"Dbux Practice")," projects."),(0,l.kt)("h2",{id:"rollup"},"Rollup"),(0,l.kt)("p",null,"TODO: We have not tested this in a while. Need to verify and set it in stone. Test with the previously working ",(0,l.kt)("inlineCode",{parentName:"p"},"Chart.js")," practice exercises (which uses Rollup)."),(0,l.kt)("p",null,"Rollup requires use of ",(0,l.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@rollup/plugin-babel"},"@rollup/plugin-babel"),"."),(0,l.kt)("p",null,"Example - something like this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-js"},"const shouldInclude = require('@dbux/babel-plugin/dist/include').default;\n\nconst config = {\n  ...\n  plugins: [\n    babel({\n      babelHelpers: 'inline',\n      filter: shouldInclude(moduleFilterOptions),\n      /**\n       * WARNING: if not skipped, we saw some serious memory leaks (in 2020), but might already be fixed in 2022.\n       * TODO: we need to test this again.\n       */\n      skipPreflightCheck: true\n    })\n  ]\n};\n")),(0,l.kt)("h2",{id:"storybook"},"Storybook"),(0,l.kt)("p",null,"TODO"),(0,l.kt)("h2",{id:"create-react-app"},"Create-React-App"),(0,l.kt)("h2",{id:"nextjs"},"Next.js"),(0,l.kt)("p",null,"TODO"),(0,l.kt)("h2",{id:"ng"},"ng"),(0,l.kt)("p",null,"TODO"),(0,l.kt)("h2",{id:"other-bundlers-or-bundler-wrappers"},"Other Bundlers or Bundler Wrappers"),(0,l.kt)("p",null,"TODO"))}f.isMDXComponent=!0}}]);