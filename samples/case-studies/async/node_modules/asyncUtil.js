exports.sleepImmediate = async function sleepImmediate(times) {
  let resolve;
  function next() {
    if (--times >= 0) {
      setImmediate(next)
    }
    else {
      return resolve();
    }
  }
  return new Promise(r => { resolve = r; next(); });
}

/**
 * Randomly generate integer in {0, 1, ..., n - 1}
 */
exports.randomInt = function randomInt(n) {
  return Math.floor(Math.random() * n);
}